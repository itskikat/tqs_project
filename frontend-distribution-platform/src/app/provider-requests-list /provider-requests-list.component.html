<nb-layout windowMode>
    <nb-layout-header fixed>
        <ngx-header></ngx-header>
    </nb-layout-header>
    <nb-sidebar class="menu-sidebar" tag="menu-sidebar" responsive>
        <nb-menu [items]="menu"></nb-menu>
    </nb-sidebar>
    <nb-layout-column>
        <div class="d-flex flex-row flex-wrap">
            <div class="col-4 p-4 d-flex" *ngFor="let sc of serviceContracts">
                <nb-card class="col-12" [accent]="sc.status!=serviceStatus.ACCEPTED ? 'warning' : (sc.status!=serviceStatus.FINNISHED ? 'success' : 'basic')">
                    <nb-card-header class="d-flex flex-column">
                        <nb-user 
                            class="mx-auto my-3"
                            size="large"
                            [name]="sc.client.name"
                            title="Frequent client"
                            badgeText="4"
                            badgeStatus="success"
                            badgePosition="bottom right"
                        >
                        </nb-user>
                        <p class="col-12 text-center font-weight-bold">{{sc.providerService.service.name}} </p>
                        
                        <div class="d-flex flex-column col-12">
                            <nb-tag class="mx-auto mb-1" status="warning" *ngIf="sc.status==serviceStatus.REJECTED" appearance="filled" text="Not accepted"></nb-tag>
                            <nb-tag class="mx-auto mb-1" status="success" *ngIf="sc.status==serviceStatus.ACCEPTED" appearance="filled" text="Accepted"></nb-tag>
                            <nb-tag class="mx-auto mb-1" status="basic" *ngIf="sc.status==serviceStatus.FINNISHED" appearance="filled" text="job finished"></nb-tag>
                            <nb-tag class="mx-auto mb-1" [status]="sc.status!=serviceStatus.ACCEPTED ? 'warning' : (sc.status!=serviceStatus.FINNISHED ? 'success' : 'basic')" appearance="outline" [text]="sc.date[3]+':'+sc.date[4]+':'+sc.date[5]"></nb-tag>
                        </div>
                    </nb-card-header>
                    <nb-card-body class="d-flex flex-column">
                        <dl class="mb-4">
                            <dt>Address</dt>
                            <dd>{{sc.client.address}}</dd>
                            <dt>{{sc.status}}</dt>
                            <dd>{{sc.date[0]}}/{{sc.date[1]}}/{{sc.date[2]}}</dd>
                            <dt *ngIf="sc.status==serviceStatus.FINNISHED">Collected</dt>
                            <dd *ngIf="sc.status==serviceStatus.FINNISHED">{{sc.businessService.price}}â‚¬</dd>
                        </dl>
                        <div class="d-flex flex-column mt-auto">
                            <button *ngIf="sc.status==serviceStatus.WAITING" nbButton status="warning" class="mx-auto">Accept</button>
                            <button *ngIf="sc.status==serviceStatus.ACCEPTED" nbButton status="success" class="mx-auto">Mark as done and collect</button>
                        </div>
                    </nb-card-body>
                </nb-card>
            </div>
        </div>
    </nb-layout-column>
    <nb-layout-footer></nb-layout-footer>
</nb-layout>